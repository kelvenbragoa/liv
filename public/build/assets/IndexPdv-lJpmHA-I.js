import{s as q}from"./index-B7BclkKh.js";import{s as A}from"./index-CzPZanNz.js";import{s as H}from"./index-CkvTDcOt.js";import{s as I}from"./index-aEfoq-ac.js";import{u as L,r as s,w as T,d as Q,c as n,b as e,a as o,t as l,e as v,F as w,o as d,N as P,n as j,f as B,i as W}from"./app-D9TxNh-u.js";import{d as G,h as Y}from"./moment-CQ1ixRO1.js";import"./index-Cwtv0tSG.js";import"./index-8C1OQYHK.js";import"./index-CUMG3_Fa.js";import"./index-DX9bqo8B.js";import"./index-iBYJyT99.js";import"./index-C5jbZ7EA.js";import"./index-DKM6o7KP.js";import"./index-RKdquAb9.js";import"./index-BKn3ZtJ0.js";import"./index-DlQAtrNW.js";import"./index-DfDLqPGZ.js";import"./index-Df0wjfzQ.js";const J={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},K={class:"w-full"},O={class:"flex flex-col gap-4 text-center"},X={key:1},Z={class:"grid grid-cols-12 gap-4"},ee={class:"card col-span-12 lg:col-span-6 xl:col-span-6"},te={class:"font-semibold text-xl"},se={class:"flex flex-col"},ae={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},oe={class:"flex flex-row md:flex-col justify-between items-start gap-2"},le={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ie={class:"text-lg font-medium mt-2"},re={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ne={class:"flex flex-col md:items-end gap-8"},de={class:"flex flex-row-reverse md:flex-row gap-2"},ce={class:"card col-span-12 lg:col-span-6 xl:col-span-6"},ue={class:"font-semibold text-xl"},me={class:"flex flex-col"},fe={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},pe={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ve={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},xe={class:"text-lg font-medium mt-2"},_e={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ue={__name:"IndexPdv",setup(ge){const k=W(),u=L();s(null);const g=s(!0),c=s(!1);let h=s(null);const C=s("");s(null);const M=s(1);s(15);const E=s(0),D=s(!1),m=s(!1),x=s([]);s([]),s([]);const _=s([]);s(null),s(null),s(null);function F(){k&&k.back()}const b=()=>{m.value=!1},N=i=>{m.value=!0,h.value=i},y=async(i=1)=>{axios.get(`/api/pdvbar?page=${i}`,{params:{query:C.value}}).then(t=>{x.value=t.data.order_itens_pending,_.value=t.data.order_itens_delivered,E.value=t.data.total,g.value=!1}).catch(t=>{g.value=!1,u.add({severity:"error",summary:`${t}`,detail:"Message Detail",life:3e3}),F()})},R=()=>{c.value=!0,axios.delete(`/api/tables/${h.value}`).then(()=>{x.value=response.data.order_itens_pending,_.value=response.data.order_itens_delivered,b(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{u.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),c.value=!1}).finally(()=>{c.value=!1})},z=()=>{c.value=!0,axios.get(`/api/barchangestatus/${h.value}`).then(()=>{y(),b(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(i=>{u.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),c.value=!1}).finally(()=>{c.value=!1})},U=G(()=>{y(M.value)},300);return T(C,U),Q(()=>{y()}),(i,t)=>{const V=I,f=H,S=A,$=q;return d(),n(w,null,[g.value?(d(),n("div",J,[e("div",K,[e("div",O,[o(V,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),t[3]||(t[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(d(),n("div",X,[e("div",Z,[e("div",ee,[e("div",te,"Pendentes("+l(x.value.length)+")",1),o(S,{value:x.value,paginator:"",rows:50,layout:"list"},{list:v(r=>[e("div",se,[(d(!0),n(w,null,P(r.items,(a,p)=>(d(),n("div",{key:p},[e("div",{class:j(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":p!==0}])},[e("div",ae,[e("div",oe,[e("div",null,[e("span",le,l(a.order.table?a.order.table.name:"Pedido Rápido")+" | #"+l(a.order.id),1),e("div",ie,l(a.product.name),1),e("span",re,l(B(Y)(a.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",ne,[e("div",de,[o(f,{onClick:he=>N(a.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",ce,[e("div",ue,"Entregue("+l(_.value.length)+")",1),o(S,{value:_.value,paginator:"",rows:50,layout:"list"},{list:v(r=>[e("div",me,[(d(!0),n(w,null,P(r.items,(a,p)=>(d(),n("div",{key:p},[e("div",{class:j(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":p!==0}])},[e("div",fe,[e("div",pe,[e("div",null,[e("span",ve,l(a.order.table?a.order.table.name:"Pedido Rápido")+" | #"+l(a.order.id),1),e("div",xe,l(a.product.name),1),e("span",_e,l(B(Y)(a.created_at).format("DD-MM-YYYY H:mm")),1)])]),t[4]||(t[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),o($,{header:"Confirmação",visible:D.value,"onUpdate:visible":t[0]||(t[0]=r=>D.value=r),style:{width:"350px"},modal:!0},{footer:v(()=>[o(f,{label:"Não",icon:"pi pi-times",onClick:b,class:"p-button-text"}),o(f,{label:"Sim",icon:"pi pi-check",onClick:R,class:"p-button-text",autofocus:""})]),default:v(()=>[t[5]||(t[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),o($,{header:"Deseja avançar o pedido para o próximo estado?",visible:m.value,"onUpdate:visible":t[2]||(t[2]=r=>m.value=r),style:{width:"30vw"}},{default:v(()=>[t[6]||(t[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),o(f,{class:"m-4",label:"Fechar",severity:"danger",onClick:t[1]||(t[1]=r=>m.value=!1)}),o(f,{class:"m-4",label:"Proximo Estado",onClick:z})]),_:1},8,["visible"])],64)}}};export{Ue as default};
