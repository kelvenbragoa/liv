import{s as $e}from"./index-Cmf-wXl7.js";import{s as je,a as Ye,b as Se}from"./index-B4UyrUDo.js";import{s as Ve,a as Ie}from"./index-CvxFcIva.js";import{s as Le}from"./index-Blg0g7ZE.js";import{s as Ue}from"./index-DGN_ZkN5.js";import{s as Be}from"./index-C2JZyL0-.js";import{s as Ee}from"./index-BMCyOMsa.js";import{s as Fe}from"./index-BEqwVNsF.js";import{u as He,r as o,w as Ne,o as qe,c as f,a as s,b as l,t as r,d as i,e as a,F as Ae,f as v,g as b,h as me,R as Ge,i as ce,j as Qe,k as ze}from"./app-VcD5h-lA.js";import"./index.esm-CQT6nZnd.js";import{d as Oe,h as _}from"./moment-CQ1ixRO1.js";import"./index-Br9Ss3Jv.js";import"./index-DQc4vd5U.js";import"./index-CMACkzzI.js";import"./index-Dm6CZD5Z.js";import"./index-CP5K0wi-.js";import"./index-CmyUASEE.js";import"./index-BD-pWD7f.js";import"./index-g-uVXGlr.js";import"./index-Dg58uWRM.js";import"./index-Cb1MB9fk.js";import"./index-BhVUBHf4.js";import"./index-CZDSej2Y.js";import"./index-BuO52acJ.js";import"./index-BsuBziKF.js";import"./index-CfT4ZI5Y.js";import"./index-C9X_DuRB.js";import"./index-BFZ_z6Bf.js";import"./index-DrZRt0gv.js";import"./index-CSbmkCeQ.js";import"./index-C_049XCm.js";const Ke={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},We={class:"w-full"},Je={class:"flex flex-col gap-4 text-center"},Xe={key:1},Ze={class:"w-full"},et={class:"mb-4"},tt={class:"grid grid-cols-12 gap-8 mb-3"},at={class:"col-span-12 lg:col-span-6 xl:col-span-3"},st={class:"card mb-0"},lt={class:"flex justify-between mb-4"},ot={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},it={class:"col-span-12 lg:col-span-6 xl:col-span-3"},rt={class:"card mb-0"},dt={class:"flex justify-between mb-4"},nt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ut={class:"col-span-12 lg:col-span-6 xl:col-span-3"},mt={class:"card mb-0"},ct={class:"flex justify-between mb-4"},pt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},vt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},ft={class:"card mb-0"},bt={class:"flex justify-between mb-4"},yt={class:"flex justify-between mb-4"},gt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ht={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},_t={class:"col-span-12 lg:col-span-6 xl:col-span-3"},xt={class:"card mb-0"},wt={class:"flex justify-between mb-4"},kt={class:"flex justify-between mb-4"},Dt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Tt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Pt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},Ct={class:"card mb-0"},Mt={class:"flex justify-between mb-4"},Rt={class:"flex justify-between mb-4"},$t={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},jt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Yt=["onClick"],St=["onClick"],Vt=["src"],It={key:1},Lt=["src"],fa={__name:"Dashboard",setup(Ut){const T=ze(),p=He();o(null);const x=o(!0),w=o(!1),u=o(""),P=o(!1),C=o(!1),M=o(!1),q=o([]),A=o([]),G=o([]),Q=o(0),z=o(0),O=o(0),R=o(!1);let K=o(null);const pe=o(""),W=o(null),$=o(1),j=o(1),Y=o(1),ve=o(1),m=o(100);o(0);const S=o(!1);o(null),o([]),o(0),o(0),o([]),o(!1),o(1);const V=o(!1),y=o(null);o(0);const J=o(0),X=o(0),Z=o(0),ee=o(0),te=o(0),ae=o(0),se=o(0),le=o(0),oe=o(0),ie=o(0);o("Aberto"),o([]);const I=o(!1),L=o(null),fe=o(!1),U=o(!1),re=n=>{L.value=n,I.value=!0},B=o(!1);function be(){w.value=!0,E(),F(),N(),H(),w.value=!1}function ye(){T&&T.back()}const de=()=>{S.value=!1};function ne(){V.value=!0,T.back()}const E=async(n=1)=>{u.value&&(u.value=u.value.toLocaleDateString("en-CA")),axios.get("/api/cashregisters/dailydashboard",{params:{date:u.value}}).then(e=>{J.value=e.data.cash_register,X.value=e.data.total_sales,Z.value=e.data.total_orders,te.value=e.data.total_tables,le.value=e.data.total_quick_sell,ee.value=e.data.average_ticket,ae.value=e.data.total_quick_sell_amount,se.value=e.data.total_tables_amount,oe.value=e.data.total_payments,ie.value=e.data.total_payments_amount,x.value=!1}).catch(e=>{x.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3}),ye()})},F=async(n=1)=>{axios.get(`/api/daily/paymentreport?page=${n}`,{params:{date:u.value}}).then(e=>{G.value=e.data,O.value=e.data.total,P.value=!1}).catch(e=>{P.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},H=async(n=1)=>{axios.get(`/api/daily/tablesellreport?page=${n}`,{params:{date:u.value}}).then(e=>{A.value=e.data,z.value=e.data.total,M.value=!1}).catch(e=>{M.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},N=async(n=1)=>{axios.get(`/api/daily/quicksellreport?page=${n}`,{params:{date:u.value}}).then(e=>{q.value=e.data,Q.value=e.data.total,C.value=!1}).catch(e=>{C.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ge=()=>{R.value=!0,axios.delete(`/api/tables/${K.value}`).then(()=>{W.value.data=W.value.data.filter(n=>n.id!==K.value),de(),p.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(n=>{p.add({severity:"error",summary:"Erro",detail:`${n}`,life:3e3}),R.value=!1}).finally(()=>{R.value=!1})},he=n=>{$.value=n.page+1,m.value=n.rows,N($.value)},_e=n=>{j.value=n.page+1,m.value=n.rows,H(j.value)},xe=n=>{Y.value=n.page+1,m.value=n.rows,F(Y.value)},we=Oe(()=>{E(ve.value)},300);function ue(){const n=document.querySelector("iframe");n&&(n.contentWindow.focus(),n.contentWindow.print())}function ke(){u.value&&(u.value=u.value.toLocaleDateString("en-CA")),axios.get("/api/cashregisters/report",{params:{date:u.value},responseType:"blob"}).then(n=>{const e=new Blob([n.data],{type:"application/pdf"});y.value=URL.createObjectURL(e),U.value=!0,fe.value=!1,p.add({severity:"success",summary:"Successo",detail:"Relatorio Gerado Com sucesso!",life:3e3})}).catch(n=>{x.value=!1,p.add({severity:"error",summary:`${n}`,detail:"Message Detail",life:3e3})})}return Ne(pe,we),qe(()=>{E(),F(),N(),H()}),(n,e)=>{const De=Fe,Te=Ee,c=Be,k=Ye,Pe=Se,d=Ue,g=Le,D=Ve,Ce=Ie,Me=je,h=$e;return v(),f(Ae,null,[x.value?(v(),f("div",Ke,[s("div",We,[s("div",Je,[l(De,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[7]||(e[7]=s("p",null,"Por Favor Aguarde...",-1))])])])):(v(),f("div",Xe,[s("div",Ze,[s("div",et,[e[8]||(e[8]=s("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Selecione a Data:",-1)),l(Te,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),dateFormat:"yy-mm-dd",showIcon:"",class:"mt-1",placeholder:"Escolha uma data"},null,8,["modelValue"])]),l(c,{label:"Gerar Relatório",icon:"pi pi-chart-line",class:"p-button-primary mb-2",onClick:be,disabled:w.value},null,8,["disabled"]),l(c,{label:"Baixar",icon:"pi pi-download",class:"p-button-primary ml-2 mb-2",onClick:ke,disabled:w.value},null,8,["disabled"])]),s("div",tt,[s("div",at,[s("div",st,[s("div",lt,[s("div",null,[e[9]||(e[9]=s("span",{class:"block text-muted-color font-medium mb-4"},"Total de Vendas",-1)),s("div",ot,r(X.value)+" MT",1)]),e[10]||(e[10]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),s("div",it,[s("div",rt,[s("div",dt,[s("div",null,[e[11]||(e[11]=s("span",{class:"block text-muted-color font-medium mb-4"},"Pedidos",-1)),s("div",nt,r(Z.value),1)]),e[12]||(e[12]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),s("div",ut,[s("div",mt,[s("div",ct,[s("div",null,[e[13]||(e[13]=s("span",{class:"block text-muted-color font-medium mb-4"},"Ticket Médio",-1)),s("div",pt,r(ee.value)+" MT",1)]),e[14]||(e[14]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),s("div",vt,[s("div",ft,[s("div",bt,[s("div",null,[e[15]||(e[15]=s("span",{class:"block text-muted-color font-medium mb-4"},"Total Mesas Abertas",-1)),s("div",yt,[s("span",gt,r(te.value),1),s("span",ht,r(se.value)+" MT",1)])]),e[16]||(e[16]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),s("div",_t,[s("div",xt,[s("div",wt,[s("div",null,[e[17]||(e[17]=s("span",{class:"block text-muted-color font-medium mb-4"},"Total Pedidos/Venda Rápido",-1)),s("div",kt,[s("span",Dt,r(le.value),1),s("span",Tt,r(ae.value)+" MT",1)])]),e[18]||(e[18]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),s("div",Pt,[s("div",Ct,[s("div",Mt,[s("div",null,[e[20]||(e[20]=s("span",{class:"block text-muted-color font-medium mb-4"},"Total Pagamentos",-1)),s("div",Rt,[s("span",$t,r(oe.value),1),e[19]||(e[19]=i("- - ")),s("span",jt,r(ie.value)+" MT",1)])]),e[21]||(e[21]=s("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[s("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])])]),l(Me,{value:"0"},{default:a(()=>[l(Pe,null,{default:a(()=>[l(k,{value:"0"},{default:a(()=>e[22]||(e[22]=[i("Vendas Rápidas")])),_:1}),l(k,{value:"1"},{default:a(()=>e[23]||(e[23]=[i("Vendas em Mesas")])),_:1}),l(k,{value:"2"},{default:a(()=>e[24]||(e[24]=[i("Pagamentos Efetuados")])),_:1}),l(k,{value:"3"},{default:a(()=>e[25]||(e[25]=[i("Caixas")])),_:1})]),_:1}),l(Ce,null,{default:a(()=>[l(D,{value:"0"},{default:a(()=>[l(g,{value:q.value.data,paginator:!0,rows:m.value,totalRecords:Q.value,dataKey:"id",lazy:!0,rowHover:!0,loading:C.value,first:($.value-1)*m.value,onPage:he,showGridlines:""},{header:a(()=>e[26]||(e[26]=[])),empty:a(()=>e[27]||(e[27]=[i("Nenhuma registro encontrado. ")])),loading:a(()=>e[28]||(e[28]=[i(" Carregando, por favor espere. ")])),default:a(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:a(({data:t})=>e[29]||(e[29]=[i(" Pedido Rápido ")])),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:t})=>[i(r(b(_)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:a(({data:t})=>[s("a",{class:"m-3",href:"#",onClick:me(Re=>re(t),["prevent"])},e[30]||(e[30]=[s("i",{class:"pi pi-eye"},null,-1)]),8,Yt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(D,{value:"1"},{default:a(()=>[l(g,{value:A.value.data,paginator:!0,rows:m.value,totalRecords:z.value,dataKey:"id",lazy:!0,rowHover:!0,loading:M.value,first:(j.value-1)*m.value,onPage:_e,showGridlines:""},{header:a(()=>e[31]||(e[31]=[])),empty:a(()=>e[32]||(e[32]=[i("Nenhuma registro encontrado. ")])),loading:a(()=>e[33]||(e[33]=[i(" Carregando, por favor espere. ")])),default:a(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.table.name),1)]),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:t})=>[i(r(b(_)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:a(({data:t})=>[s("a",{class:"m-3",href:"#",onClick:me(Re=>re(t),["prevent"])},e[34]||(e[34]=[s("i",{class:"pi pi-eye"},null,-1)]),8,St)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(D,{value:"2"},{default:a(()=>[l(g,{value:G.value.data,paginator:!0,rows:m.value,totalRecords:O.value,dataKey:"id",lazy:!0,rowHover:!0,loading:P.value,first:(Y.value-1)*m.value,onPage:xe,showGridlines:""},{header:a(()=>e[35]||(e[35]=[])),empty:a(()=>e[36]||(e[36]=[i("Nenhuma registro encontrado. ")])),loading:a(()=>e[37]||(e[37]=[i(" Carregando, por favor espere. ")])),default:a(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.id),1)]),_:1}),l(d,{header:"Venda",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(" #"+r(t.order_id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.order.table_id==null?"Pedido Rápido":t.order.table.name),1)]),_:1}),l(d,{header:"Metodo de Pagamento",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.method.name),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.amount)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:t})=>[i(r(b(_)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(D,{value:"3"},{default:a(()=>[l(g,{value:J.value,paginator:!0,rows:15,dataKey:"id",lazy:!1,rowHover:!0,showGridlines:""},{header:a(()=>e[38]||(e[38]=[])),empty:a(()=>e[39]||(e[39]=[i("Nenhuma registro encontrado. ")])),loading:a(()=>e[40]||(e[40]=[i(" Carregando, por favor espere. ")])),default:a(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Usuário",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.order_itens_total)+" MT ",1)]),_:1}),l(d,{header:"Valor Final Declarado",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.closing_balance)+" MT ",1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Abertura",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:t})=>[i(r(b(_)(t.opened_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Fechado as",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:t})=>[i(r(t.closed_at?b(_)(t.closed_at).format("DD-MM-YYYY H:mm"):"-"),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:a(({data:t})=>[l(b(Ge),{class:"m-3",to:"/admin/cashregisters/"+t.id},{default:a(()=>e[41]||(e[41]=[s("i",{class:"pi pi-eye"},null,-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])),l(h,{header:"Confirmação",visible:S.value,"onUpdate:visible":e[1]||(e[1]=t=>S.value=t),style:{width:"350px"},modal:!0},{footer:a(()=>[l(c,{label:"Não",icon:"pi pi-times",onClick:de,class:"p-button-text"}),l(c,{label:"Sim",icon:"pi pi-check",onClick:ge,class:"p-button-text",autofocus:""})]),default:a(()=>[e[42]||(e[42]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),l(h,{header:"Open File",visible:B.value,"onUpdate:visible":e[3]||(e[3]=t=>B.value=t),style:{width:"30vw"}},{default:a(()=>[e[43]||(e[43]=s("p",null,"Here you can manage your files or perform specific actions.",-1)),l(c,{label:"Close",onClick:e[2]||(e[2]=t=>B.value=!1)})]),_:1},8,["visible"]),l(h,{visible:V.value,"onUpdate:visible":e[4]||(e[4]=t=>V.value=t),header:"Recibo",modal:!0,style:{width:"600px"},closable:!1},{footer:a(()=>[l(c,{label:"Imprimir",icon:"pi pi-print",onClick:ue}),l(c,{label:"Fechar",icon:"pi pi-times",class:"p-button-text",onClick:ne})]),default:a(()=>[y.value?(v(),f("iframe",{key:0,src:y.value,style:{width:"100%",height:"500px"},frameborder:"0"},null,8,Vt)):ce("",!0)]),_:1},8,["visible"]),l(h,{visible:I.value,"onUpdate:visible":e[5]||(e[5]=t=>I.value=t),header:"Itens do Pedido #",modal:!0,style:{width:"50vw"}},{default:a(()=>[L.value?(v(),Qe(g,{key:0,value:L.value.itens,responsiveLayout:"scroll"},{default:a(()=>[l(d,{header:"Produto",style:{"min-width":"12rem"}},{body:a(({data:t})=>[i(r(t.product.name),1)]),_:1}),l(d,{header:"Quantidade",style:{"min-width":"8rem"}},{body:a(({data:t})=>[i(r(t.quantity),1)]),_:1}),l(d,{header:"Preço Unitário",style:{"min-width":"8rem"}},{body:a(({data:t})=>[i(r(t.price)+" MT",1)]),_:1}),l(d,{header:"Total",style:{"min-width":"8rem"}},{body:a(({data:t})=>[i(r(t.total)+" MT",1)]),_:1})]),_:1},8,["value"])):(v(),f("p",It,"Nenhum item encontrado para este pedido."))]),_:1},8,["visible"]),l(h,{visible:U.value,"onUpdate:visible":e[6]||(e[6]=t=>U.value=t),header:"Relatório",modal:!0,style:{width:"600px"},closable:!1},{footer:a(()=>[l(c,{label:"Imprimir",icon:"pi pi-print",onClick:ue}),l(c,{label:"Fechar",icon:"pi pi-times",class:"p-button-text",onClick:ne})]),default:a(()=>[y.value?(v(),f("iframe",{key:0,src:y.value,style:{width:"100%",height:"500px"},frameborder:"0"},null,8,Lt)):ce("",!0)]),_:1},8,["visible"])],64)}}};export{fa as default};
