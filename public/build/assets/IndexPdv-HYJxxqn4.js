import{s as A}from"./index-DctJdWzh.js";import{s as I}from"./index-DMXX2faK.js";import{s as L}from"./index-BqHTUq_r.js";import{s as T}from"./index-BCtH6ldZ.js";import{u as Q,r as l,w as W,d as G,c as d,b as e,a as o,t as a,e as f,F as x,o as c,N as w,n as y,f as k,i as J}from"./app-DLxVYFcV.js";import{d as K,h as C}from"./moment-CQ1ixRO1.js";import"./index-CKcjRDyV.js";import"./index-xHeVTflO.js";import"./index-DJJhjwvJ.js";import"./index-WDHFtP3j.js";import"./index-Cf9ffEQN.js";import"./index-C8wWzmvv.js";import"./index-CFXmJ2ny.js";import"./index-DobHHfrk.js";import"./index-DEZapVxQ.js";import"./index-D2Ingi5k.js";import"./index-U-1XzFtk.js";import"./index-CpfipRAq.js";const O={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},X={class:"w-full"},Z={class:"flex flex-col gap-4 text-center"},ee={key:1},te={class:"grid grid-cols-12 gap-4"},se={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},ae={class:"font-semibold text-xl"},le={class:"flex flex-col"},oe={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ie={class:"flex flex-row md:flex-col justify-between items-start gap-2"},re={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ne={class:"text-lg font-medium mt-2"},de={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ce={class:"flex flex-col md:items-end gap-8"},ue={class:"flex flex-row-reverse md:flex-row gap-2"},fe={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},me={class:"font-semibold text-xl"},pe={class:"flex flex-col"},xe={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ve={class:"flex flex-row md:flex-col justify-between items-start gap-2"},_e={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ge={class:"text-lg font-medium mt-2"},he={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},be={class:"flex flex-col md:items-end gap-8"},we={class:"flex flex-row-reverse md:flex-row gap-2"},ye={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},ke={class:"font-semibold text-xl"},Ce={class:"flex flex-col"},De={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},Ye={class:"flex flex-row md:flex-col justify-between items-start gap-2"},Pe={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},je={class:"text-lg font-medium mt-2"},$e={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Me={class:"flex flex-col md:items-end gap-8"},Se={class:"flex flex-row-reverse md:flex-row gap-2"},Be={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Re={class:"font-semibold text-xl"},Ee={class:"flex flex-col"},Fe={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},He={class:"flex flex-row md:flex-col justify-between items-start gap-2"},Ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ze={class:"text-lg font-medium mt-2"},Ue={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ot={__name:"IndexPdv",setup(Ve){const j=J(),D=Q();l(null);const Y=l(!0),m=l(!1);let $=l(null);const M=l("");l(null);const H=l(1);l(15);const N=l(0),S=l(!1),p=l(!1),v=l([]),_=l([]),g=l([]),h=l([]);l(null),l(null),l(null);function z(){j&&j.back()}const B=()=>{p.value=!1},P=i=>{p.value=!0,$.value=i},R=async(i=1)=>{axios.get(`/api/pdvkitchen?page=${i}`,{params:{query:M.value}}).then(s=>{v.value=s.data.order_itens_pending,_.value=s.data.order_itens_getting_ready,g.value=s.data.order_itens_ready,h.value=s.data.order_itens_delivered,N.value=s.data.total,Y.value=!1}).catch(s=>{Y.value=!1,D.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3}),z()})},U=()=>{m.value=!0,axios.get(`/api/changestatus/${$.value}`).then(i=>{v.value=i.data.order_itens_pending,_.value=i.data.order_itens_getting_ready,g.value=i.data.order_itens_ready,h.value=i.data.order_itens_delivered,m.value=!1,B(),D.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(i=>{D.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},V=K(()=>{R(H.value)},300);return W(M,V),G(()=>{R()}),(i,s)=>{const q=T,u=L,b=I,E=A;return c(),d(x,null,[Y.value?(c(),d("div",O,[e("div",X,[e("div",Z,[o(q,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),s[3]||(s[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(c(),d("div",ee,[e("div",te,[e("div",se,[e("div",ae,"Pendentes("+a(v.value.length)+")",1),o(b,{value:v.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",le,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",oe,[e("div",ie,[e("div",null,[e("span",re,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",ne,a(t.product.name),1),e("span",de,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",ce,[e("div",ue,[o(u,{onClick:F=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",fe,[e("div",me,"Preparando("+a(_.value.length)+")",1),o(b,{value:_.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",pe,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",xe,[e("div",ve,[e("div",null,[e("span",_e,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",ge,a(t.product.name),1),e("span",he,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",be,[e("div",we,[o(u,{onClick:F=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",ye,[e("div",ke,"Pronto("+a(g.value.length)+")",1),o(b,{value:g.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",Ce,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",De,[e("div",Ye,[e("div",null,[e("span",Pe,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",je,a(t.product.name),1),e("span",$e,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",Me,[e("div",Se,[o(u,{onClick:F=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Be,[e("div",Re,"Entregue("+a(h.value.length)+")",1),o(b,{value:h.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",Ee,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",Fe,[e("div",He,[e("div",null,[e("span",Ne,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",ze,a(t.product.name),1),e("span",Ue,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),s[4]||(s[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),o(E,{header:"Confirmação",visible:S.value,"onUpdate:visible":s[0]||(s[0]=r=>S.value=r),style:{width:"350px"},modal:!0},{footer:f(()=>[o(u,{label:"Não",icon:"pi pi-times",onClick:B,class:"p-button-text"}),o(u,{label:"Sim",icon:"pi pi-check",onClick:i.deleteData,class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:f(()=>[s[5]||(s[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),o(E,{header:"Deseja avançar o pedido para o próximo estado?",visible:p.value,"onUpdate:visible":s[2]||(s[2]=r=>p.value=r),style:{width:"30vw"}},{default:f(()=>[s[6]||(s[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),o(u,{class:"m-4",label:"Fechar",severity:"danger",onClick:s[1]||(s[1]=r=>p.value=!1)}),o(u,{class:"m-4",label:"Proximo Estado",disabled:m.value==!0,onClick:U},null,8,["disabled"])]),_:1},8,["visible"])],64)}}};export{ot as default};
