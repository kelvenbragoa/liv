import{s as V}from"./index-BRNktX2E.js";import{s as G}from"./index-AWIQTxcy.js";import{s as L}from"./index-Cb1LdzHe.js";import{s as Q}from"./index-CCb6TqFA.js";import{u as T,r as s,w as W,o as J,aQ as K,c as d,a as e,b as r,t as l,e as _,F as D,f as c,a5 as A,n as B,g,k as O}from"./app-BYFo5I9W.js";import{d as X,h}from"./moment-CQ1ixRO1.js";import"./index-SlgaqbJJ.js";import"./index-UOwkvPHx.js";import"./index-Dt5xBhAL.js";import"./index-BjRyjlzs.js";import"./index-2wuPPO7I.js";import"./index-mIl01ItU.js";import"./index-D_dmYxTU.js";import"./index-B3ArbSU4.js";import"./index-D0ibLGPI.js";import"./index-CwuvFflh.js";import"./index-8okxLUtA.js";import"./index-CAAlKitd.js";const Z={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ee={class:"w-full"},te={class:"flex flex-col gap-4 text-center"},ae={key:1},se={class:"grid grid-cols-12 gap-4"},le={class:"card col-span-12 lg:col-span-6 xl:col-span-6"},oe={class:"font-semibold text-xl"},re={class:"flex flex-col"},ne={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ie={class:"flex flex-row md:flex-col justify-between items-start gap-2"},de={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ce={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ue={class:"text-lg font-medium mt-2"},me={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},fe={class:"flex flex-col md:items-end gap-8"},pe={class:"flex flex-row-reverse md:flex-row gap-2"},ve={class:"card col-span-12 lg:col-span-6 xl:col-span-6"},xe={class:"font-semibold text-xl"},_e={class:"flex flex-col"},ge={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},he={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ye={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},be={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ke={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},we={class:"text-lg font-medium mt-2"},De={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Le={__name:"IndexDelivery",setup(Ce){const C=O(),u=T();s(null);const y=s(!0),n=s(!1);let b=s(null);const Y=s("");s(null);const P=s(1);s(15);const N=s(0),S=s(!1),m=s(!1);let $;const f=s([]),E=s([]),q=s([]),p=s([]);s(null),s(null),s(null);function z(){C&&C.back()}const k=()=>{m.value=!1},F=o=>{m.value=!0,b.value=o},w=async(o=1)=>{axios.get(`/api/pdvbar?page=${o}`,{params:{query:Y.value}}).then(a=>{f.value=a.data.order_itens_pending,p.value=a.data.order_itens_delivered,N.value=a.data.total,y.value=!1}).catch(a=>{y.value=!1,u.add({severity:"error",summary:`${a}`,detail:"Message Detail",life:3e3}),z()})},H=()=>{n.value=!0,axios.delete(`/api/tables/${b.value}`).then(()=>{f.value=response.data.order_itens_pending,p.value=response.data.order_itens_delivered,k(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(o=>{u.add({severity:"error",summary:"Erro",detail:`${o}`,life:3e3}),n.value=!1}).finally(()=>{n.value=!1})},I=()=>{n.value=!0,axios.get(`/api/barchangestatus/${b.value}`).then(o=>{f.value=o.data.order_itens_pending,E.value=o.data.order_itens_getting_ready,q.value=o.data.order_itens_ready,p.value=o.data.order_itens_delivered,n.value=!1,k(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(o=>{u.add({severity:"error",summary:"Erro",detail:`${o}`,life:3e3}),n.value=!1}).finally(()=>{n.value=!1})},R=X(()=>{w(P.value)},300);return W(Y,R),J(()=>{w(),$=setInterval(()=>{w()},3e4)}),K(()=>{clearInterval($)}),(o,a)=>{const U=Q,v=L,M=G,j=V;return c(),d(D,null,[y.value?(c(),d("div",Z,[e("div",ee,[e("div",te,[r(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),a[3]||(a[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(c(),d("div",ae,[e("div",se,[e("div",le,[e("div",oe,"Pendentes("+l(f.value.length)+")",1),r(M,{value:f.value,paginator:"",rows:50,layout:"list"},{list:_(i=>[e("div",re,[(c(!0),d(D,null,A(i.items,(t,x)=>(c(),d("div",{key:x},[e("div",{class:B(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":x!==0}])},[e("div",ne,[e("div",ie,[e("div",null,[e("span",de,l(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+l(t.order.id),1),e("p",null,[e("span",ce,"Garçom:"+l(t.user?t.user.name:"N/A"),1)]),e("div",ue,l(t.quantity)+" * "+l(t.product.name),1),e("span",me,"DC:"+l(g(h)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+l(g(h)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",fe,[e("div",pe,[r(v,{onClick:Ye=>F(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",ve,[e("div",xe,"Entregue("+l(p.value.length)+")",1),r(M,{value:p.value,paginator:"",rows:50,layout:"list"},{list:_(i=>[e("div",_e,[(c(!0),d(D,null,A(i.items,(t,x)=>(c(),d("div",{key:x},[e("div",{class:B(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":x!==0}])},[e("div",ge,[e("div",he,[e("div",null,[e("span",ye,l(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+l(t.order.id),1),e("p",null,[e("span",be,"Garçom:"+l(t.user?t.user.name:"N/A"),1)]),e("p",null,[e("span",ke,"Atualizado por:"+l(t.deliveredby?t.deliveredby.name:"N/A"),1)]),e("div",we,l(t.quantity)+" * "+l(t.product.name),1),e("span",De,"DC:"+l(g(h)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+l(g(h)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),a[4]||(a[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),r(j,{header:"Confirmação",visible:S.value,"onUpdate:visible":a[0]||(a[0]=i=>S.value=i),style:{width:"350px"},modal:!0},{footer:_(()=>[r(v,{label:"Não",icon:"pi pi-times",onClick:k,class:"p-button-text"}),r(v,{label:"Sim",icon:"pi pi-check",onClick:H,class:"p-button-text",autofocus:""})]),default:_(()=>[a[5]||(a[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),r(j,{header:"Deseja avançar o pedido para o próximo estado?",visible:m.value,"onUpdate:visible":a[2]||(a[2]=i=>m.value=i),style:{width:"30vw"}},{default:_(()=>[a[6]||(a[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),r(v,{class:"m-4",label:"Fechar",severity:"danger",onClick:a[1]||(a[1]=i=>m.value=!1)}),r(v,{class:"m-4",label:"Proximo Estado",disabled:n.value==!0,onClick:I},null,8,["disabled"])]),_:1},8,["visible"])],64)}}};export{Le as default};
