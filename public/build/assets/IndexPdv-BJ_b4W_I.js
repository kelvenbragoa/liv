import{s as V}from"./index-BAJ8BoJB.js";import{s as q}from"./index-BqYq1STa.js";import{s as z}from"./index-Dk9tLgkK.js";import{s as L}from"./index-fnbGBSyE.js";import{s as N}from"./index-B1XikUAJ.js";import{u as U,r as i,w as E,b as A,aS as H,c as o,d as e,a as n,e as c,F as w,a1 as Q,o as r,n as C,t as g,f as W,R as G,i as J}from"./app-D1gvDmtx.js";import{d as K}from"./moment-CQ1ixRO1.js";import"./index-CJfA8TjA.js";import"./index-BiiFPXf7.js";import"./index-ohKRNl0-.js";import"./index-DhmxyLuB.js";import"./index-CXq41HbF.js";import"./index-CFpIkuZG.js";const O={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},X={class:"w-full"},Y={class:"flex flex-col gap-4 text-center"},Z={key:1},ee={class:"mb-2"},te={class:"grid grid-cols-12 gap-8"},ae={class:"flex justify-between mb-4"},se={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ie={class:"flex justify-between mb-4"},ne={class:"text-primary font-medium"},be={__name:"IndexPdv",setup(oe){let _;const d=J(),u=U();i(null);const p=i(!0),m=i(!1);let x=i(null);const y=i(""),l=i(null),D=i(1);i(15);const S=i(0),f=i(!1),$=[{label:"Venda Rápida",items:[{label:"Inicar Venda Rápida",icon:"pi pi-fw pi-shopping-cart",command:()=>{d.push("/admin/pdv/quicksell")}}]},{label:"Caixa",items:[{label:"Fecho de caixa",icon:"pi pi-fw pi-lock",command:()=>{openFileDialog.value=!0}},{label:"Relatório de caixa",icon:"pi pi-fw pi-check",command:()=>{openFileDialog.value=!0}}]}];function B(){d&&d.back()}const h=()=>{f.value=!1};function b(s){switch(s){case 1:return"red";case 2:return"red";case 3:return"warn";case 4:return"danger";case 5:return"info";case 6:return"info"}}function j(s){switch(s){case 1:return"success";case 2:return"danger";case 3:return"warn";case 4:return"danger";case 5:return"info";case 6:return"info"}}const v=async(s=1)=>{axios.get(`/api/pdv?page=${s}`,{params:{query:y.value}}).then(t=>{l.value=t.data,S.value=t.data.total,p.value=!1}).catch(t=>{p.value=!1,u.add({severity:"error",summary:`${t}`,detail:"Message Detail",life:3e3}),B()})},R=()=>{m.value=!0,axios.delete(`/api/tables/${x.value}`).then(()=>{l.value.data=l.value.data.filter(s=>s.id!==x.value),h(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(s=>{u.add({severity:"error",summary:"Erro",detail:`${s}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},F=K(()=>{v(D.value)},300);return E(y,F),A(()=>{v(),_=setInterval(()=>{v()},3e4)}),H(()=>{clearInterval(_)}),(s,t)=>{const M=N,T=L,I=z,k=q,P=V;return r(),o(w,null,[p.value?(r(),o("div",O,[e("div",X,[e("div",Y,[n(M,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),t[1]||(t[1]=e("p",null,"Por Favor Aguarde...",-1))])])])):(r(),o("div",Z,[e("div",ee,[n(T,{model:$},{end:c(()=>t[2]||(t[2]=[e("p",null,"Total Venda Hoje: 0 MT",-1)])),_:1})]),e("div",te,[(r(!0),o(w,null,Q(l.value.data,(a,re)=>(r(),o("div",{class:"col-span-12 lg:col-span-6 xl:col-span-3",key:a.id},[n(W(G),{to:"/admin/pdv/"+a.id+"/categories"},{default:c(()=>[e("div",{class:C(["card mb-0",{"bg-green-100":a.table_status_id===1,"bg-red-100":a.table_status_id===2}])},[e("div",ae,[e("div",null,[e("div",se,g(a.name),1)]),e("div",{class:C(["flex items-center justify-center rounded-full",`bg-${b(a.status_id)}-100`,`dark:bg-${b(a.status_id)}-400/10`]),style:{width:"2.5rem",height:"2.5rem"}},t[3]||(t[3]=[e("i",{class:"pi pi-list text-blue-500 !text-xl","aria-label":"Carrinho de Compras"},null,-1)]),2)]),e("div",ie,[e("span",ne,"Capacidade: "+g(a.capacity),1),e("span",null,[n(I,{value:a.status.name,severity:j(a.table_status_id)},null,8,["value","severity"])])]),e("small",null,"Consumo: "+g(a.last_order!=null?a.last_order.total:0)+" MT",1)],2)]),_:2},1032,["to"])]))),128))])])),n(P,{header:"Confirmação",visible:f.value,"onUpdate:visible":t[0]||(t[0]=a=>f.value=a),style:{width:"350px"},modal:!0},{footer:c(()=>[n(k,{label:"Não",icon:"pi pi-times",onClick:h,class:"p-button-text"}),n(k,{label:"Sim",icon:"pi pi-check",onClick:R,class:"p-button-text",autofocus:""})]),default:c(()=>[t[4]||(t[4]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{be as default};
