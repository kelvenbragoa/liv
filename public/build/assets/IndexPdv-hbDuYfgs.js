import{s as V}from"./index-you10EQz.js";import{s as N}from"./index-B8X6OEZ2.js";import{s as q}from"./index-D8gBGBgu.js";import{s as z}from"./index-Dl72Ah1Z.js";import{s as I}from"./index-DEObxSUk.js";import{u as L,r as i,w as E,d as U,c as n,b as e,a as o,e as c,F as k,N as A,o as r,n as w,t as v,f as H,R as Q,i as W}from"./app-CXGBgI8O.js";import{d as G}from"./moment-CQ1ixRO1.js";import"./index-bApVoikF.js";import"./index-BJaUJknB.js";import"./index-DPSe1DpR.js";import"./index-4V-h8YiW.js";import"./index-BxZLkSLA.js";import"./index-DO6YoY5L.js";const J={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},K={class:"w-full"},O={class:"flex flex-col gap-4 text-center"},X={key:1},Y={class:"mb-2"},Z={class:"grid grid-cols-12 gap-8"},ee={class:"flex justify-between mb-4"},te={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ae={class:"flex justify-between mb-4"},se={class:"text-primary font-medium"},ye={__name:"IndexPdv",setup(ie){const d=W(),u=L();i(null);const p=i(!0),m=i(!1);let g=i(null);const _=i(""),l=i(null),C=i(1);i(15);const D=i(0),f=i(!1),$=[{label:"Venda Rápida",items:[{label:"Inicar Venda Rápida",icon:"pi pi-fw pi-shopping-cart",command:()=>{d.push("/admin/pdv/quicksell")}}]},{label:"Caixa",items:[{label:"Fecho de caixa",icon:"pi pi-fw pi-lock",command:()=>{openFileDialog.value=!0}},{label:"Relatório de caixa",icon:"pi pi-fw pi-check",command:()=>{openFileDialog.value=!0}}]}];function S(){d&&d.back()}const x=()=>{f.value=!1};function y(s){switch(s){case 1:return"red";case 2:return"red";case 3:return"warn";case 4:return"danger";case 5:return"info";case 6:return"info"}}function B(s){switch(s){case 1:return"success";case 2:return"danger";case 3:return"warn";case 4:return"danger";case 5:return"info";case 6:return"info"}}const h=async(s=1)=>{axios.get(`/api/pdv?page=${s}`,{params:{query:_.value}}).then(t=>{l.value=t.data,D.value=t.data.total,p.value=!1}).catch(t=>{p.value=!1,u.add({severity:"error",summary:`${t}`,detail:"Message Detail",life:3e3}),S()})},j=()=>{m.value=!0,axios.delete(`/api/tables/${g.value}`).then(()=>{l.value.data=l.value.data.filter(s=>s.id!==g.value),x(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(s=>{u.add({severity:"error",summary:"Erro",detail:`${s}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},R=G(()=>{h(C.value)},300);return E(_,R),U(()=>{h()}),(s,t)=>{const F=I,M=z,T=q,b=N,P=V;return r(),n(k,null,[p.value?(r(),n("div",J,[e("div",K,[e("div",O,[o(F,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),t[1]||(t[1]=e("p",null,"Por Favor Aguarde...",-1))])])])):(r(),n("div",X,[e("div",Y,[o(M,{model:$},{end:c(()=>t[2]||(t[2]=[e("p",null,"Total Venda Hoje: 0 MT",-1)])),_:1})]),e("div",Z,[(r(!0),n(k,null,A(l.value.data,(a,oe)=>(r(),n("div",{class:"col-span-12 lg:col-span-6 xl:col-span-3",key:a.id},[o(H(Q),{to:"/admin/pdv/"+a.id+"/categories"},{default:c(()=>[e("div",{class:w(["card mb-0",{"bg-green-100":a.table_status_id===1,"bg-red-100":a.table_status_id===2}])},[e("div",ee,[e("div",null,[e("div",te,v(a.name),1)]),e("div",{class:w(["flex items-center justify-center rounded-full",`bg-${y(a.status_id)}-100`,`dark:bg-${y(a.status_id)}-400/10`]),style:{width:"2.5rem",height:"2.5rem"}},t[3]||(t[3]=[e("i",{class:"pi pi-list text-blue-500 !text-xl","aria-label":"Carrinho de Compras"},null,-1)]),2)]),e("div",ae,[e("span",se,"Capacidade: "+v(a.capacity),1),e("span",null,[o(T,{value:a.status.name,severity:B(a.table_status_id)},null,8,["value","severity"])])]),e("small",null,"Consumo: "+v(a.last_order!=null?a.last_order.total:0)+" MT",1)],2)]),_:2},1032,["to"])]))),128))])])),o(P,{header:"Confirmação",visible:f.value,"onUpdate:visible":t[0]||(t[0]=a=>f.value=a),style:{width:"350px"},modal:!0},{footer:c(()=>[o(b,{label:"Não",icon:"pi pi-times",onClick:x,class:"p-button-text"}),o(b,{label:"Sim",icon:"pi pi-check",onClick:j,class:"p-button-text",autofocus:""})]),default:c(()=>[t[4]||(t[4]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{ye as default};
