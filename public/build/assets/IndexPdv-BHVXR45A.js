import{s as I}from"./index-wHoCaEQC.js";import{s as L}from"./index-BCrUZX0w.js";import{s as T}from"./index-C3b0ss4o.js";import{s as Q}from"./index-CBiwJ3GB.js";import{u as W,r as l,w as G,d as J,c as n,b as e,a as o,t as a,e as f,F as v,o as d,N as w,n as k,f as C,i as K}from"./app-BjVVBAtT.js";import{d as O,h as D}from"./moment-CQ1ixRO1.js";import"./index-BQC6ZyQW.js";import"./index-DkU3tX47.js";import"./index-C1NzvEqD.js";import"./index-zyHqa2Pa.js";import"./index-GxpFhDcc.js";import"./index-CugEUKZ4.js";import"./index-Ds3VuB-w.js";import"./index-BxhVRtJo.js";import"./index-B5YzS6LK.js";import"./index-DKfvVfq2.js";import"./index-BEfkFOTB.js";import"./index-C5R54WX7.js";const X={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},Z={class:"w-full"},ee={class:"flex flex-col gap-4 text-center"},te={key:1},se={class:"grid grid-cols-12 gap-4"},ae={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},le={class:"font-semibold text-xl"},oe={class:"flex flex-col"},ie={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},re={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},de={class:"text-lg font-medium mt-2"},ce={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ue={class:"flex flex-col md:items-end gap-8"},fe={class:"flex flex-row-reverse md:flex-row gap-2"},me={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},pe={class:"font-semibold text-xl"},xe={class:"flex flex-col"},ve={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},_e={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ge={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},he={class:"text-lg font-medium mt-2"},ye={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},be={class:"flex flex-col md:items-end gap-8"},we={class:"flex flex-row-reverse md:flex-row gap-2"},ke={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Ce={class:"font-semibold text-xl"},De={class:"flex flex-col"},Ye={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},Pe={class:"flex flex-row md:flex-col justify-between items-start gap-2"},$e={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},je={class:"text-lg font-medium mt-2"},Se={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Me={class:"flex flex-col md:items-end gap-8"},Be={class:"flex flex-row-reverse md:flex-row gap-2"},Re={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Ee={class:"font-semibold text-xl"},Fe={class:"flex flex-col"},He={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},Ne={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ze={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ue={class:"text-lg font-medium mt-2"},Ve={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},it={__name:"IndexPdv",setup(qe){const M=K(),p=W();l(null);const Y=l(!0),m=l(!1);let P=l(null);const B=l("");l(null);const H=l(1);l(15);const N=l(0),R=l(!1),x=l(!1),_=l([]),g=l([]),h=l([]),y=l([]);l(null),l(null),l(null);function z(){M&&M.back()}const $=()=>{x.value=!1},j=c=>{x.value=!0,P.value=c},S=async(c=1)=>{axios.get(`/api/pdvkitchen?page=${c}`,{params:{query:B.value}}).then(s=>{_.value=s.data.order_itens_pending,g.value=s.data.order_itens_getting_ready,h.value=s.data.order_itens_ready,y.value=s.data.order_itens_delivered,N.value=s.data.total,Y.value=!1}).catch(s=>{Y.value=!1,p.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3}),z()})},U=()=>{m.value=!0,axios.delete(`/api/tables/${P.value}`).then(()=>{_.value=response.data.order_itens_pending,g.value=response.data.order_itens_getting_ready,h.value=response.data.order_itens_ready,y.value=response.data.order_itens_delivered,$(),p.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(c=>{p.add({severity:"error",summary:"Erro",detail:`${c}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},V=()=>{m.value=!0,axios.get(`/api/changestatus/${P.value}`).then(()=>{S(),$(),p.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(c=>{p.add({severity:"error",summary:"Erro",detail:`${c}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},q=O(()=>{S(H.value)},300);return G(B,q),J(()=>{S()}),(c,s)=>{const A=Q,u=T,b=L,E=I;return d(),n(v,null,[Y.value?(d(),n("div",X,[e("div",Z,[e("div",ee,[o(A,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),s[3]||(s[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(d(),n("div",te,[e("div",se,[e("div",ae,[e("div",le,"Pendentes("+a(_.value.length)+")",1),o(b,{value:_.value,paginator:"",rows:50,layout:"list"},{list:f(i=>[e("div",oe,[(d(!0),n(v,null,w(i.items,(t,r)=>(d(),n("div",{key:r},[e("div",{class:k(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":r!==0}])},[e("div",ie,[e("div",re,[e("div",null,[e("span",ne,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",de,a(t.product.name),1),e("span",ce,a(C(D)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",ue,[e("div",fe,[o(u,{onClick:F=>j(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",me,[e("div",pe,"Preparando("+a(g.value.length)+")",1),o(b,{value:g.value,paginator:"",rows:50,layout:"list"},{list:f(i=>[e("div",xe,[(d(!0),n(v,null,w(i.items,(t,r)=>(d(),n("div",{key:r},[e("div",{class:k(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":r!==0}])},[e("div",ve,[e("div",_e,[e("div",null,[e("span",ge,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",he,a(t.product.name),1),e("span",ye,a(C(D)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",be,[e("div",we,[o(u,{onClick:F=>j(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",ke,[e("div",Ce,"Pronto("+a(h.value.length)+")",1),o(b,{value:h.value,paginator:"",rows:50,layout:"list"},{list:f(i=>[e("div",De,[(d(!0),n(v,null,w(i.items,(t,r)=>(d(),n("div",{key:r},[e("div",{class:k(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":r!==0}])},[e("div",Ye,[e("div",Pe,[e("div",null,[e("span",$e,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",je,a(t.product.name),1),e("span",Se,a(C(D)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",Me,[e("div",Be,[o(u,{onClick:F=>j(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Re,[e("div",Ee,"Entregue("+a(y.value.length)+")",1),o(b,{value:y.value,paginator:"",rows:50,layout:"list"},{list:f(i=>[e("div",Fe,[(d(!0),n(v,null,w(i.items,(t,r)=>(d(),n("div",{key:r},[e("div",{class:k(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":r!==0}])},[e("div",He,[e("div",Ne,[e("div",null,[e("span",ze,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",Ue,a(t.product.name),1),e("span",Ve,a(C(D)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),s[4]||(s[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),o(E,{header:"Confirmação",visible:R.value,"onUpdate:visible":s[0]||(s[0]=i=>R.value=i),style:{width:"350px"},modal:!0},{footer:f(()=>[o(u,{label:"Não",icon:"pi pi-times",onClick:$,class:"p-button-text"}),o(u,{label:"Sim",icon:"pi pi-check",onClick:U,class:"p-button-text",autofocus:""})]),default:f(()=>[s[5]||(s[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),o(E,{header:"Deseja avançar o pedido para o próximo estado?",visible:x.value,"onUpdate:visible":s[2]||(s[2]=i=>x.value=i),style:{width:"30vw"}},{default:f(()=>[s[6]||(s[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),o(u,{class:"m-4",label:"Fechar",severity:"danger",onClick:s[1]||(s[1]=i=>x.value=!1)}),o(u,{class:"m-4",label:"Proximo Estado",onClick:V})]),_:1},8,["visible"])],64)}}};export{it as default};
