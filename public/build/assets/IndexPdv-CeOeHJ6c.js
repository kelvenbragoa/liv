import{s as q}from"./index-BRNktX2E.js";import{s as V}from"./index-AWIQTxcy.js";import{s as L}from"./index-Cb1LdzHe.js";import{s as Q}from"./index-CCb6TqFA.js";import{u as T,r as l,w as W,o as J,aQ as K,c as i,a as e,b as o,t as s,e as p,F as v,f as c,a5 as k,n as D,g as u,k as O}from"./app-BYFo5I9W.js";import{d as X,h as f}from"./moment-CQ1ixRO1.js";import"./index-SlgaqbJJ.js";import"./index-UOwkvPHx.js";import"./index-Dt5xBhAL.js";import"./index-BjRyjlzs.js";import"./index-2wuPPO7I.js";import"./index-mIl01ItU.js";import"./index-D_dmYxTU.js";import"./index-B3ArbSU4.js";import"./index-D0ibLGPI.js";import"./index-CwuvFflh.js";import"./index-8okxLUtA.js";import"./index-CAAlKitd.js";const Z={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ee={class:"w-full"},te={class:"flex flex-col gap-4 text-center"},se={key:1},ae={class:"grid grid-cols-12 gap-4"},le={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},oe={class:"font-semibold text-xl"},re={class:"flex flex-col"},ne={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},de={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ie={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ce={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ue={class:"text-lg font-medium mt-2"},fe={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},me={class:"flex flex-col md:items-end gap-8"},pe={class:"flex flex-row-reverse md:flex-row gap-2"},xe={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},_e={class:"font-semibold text-xl"},ve={class:"flex flex-col"},ge={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},he={class:"flex flex-row md:flex-col justify-between items-start gap-2"},be={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ye={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},we={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ke={class:"text-lg font-medium mt-2"},De={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ye={class:"flex flex-col md:items-end gap-8"},Ce={class:"flex flex-row-reverse md:flex-row gap-2"},Me={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Ae={class:"font-semibold text-xl"},Pe={class:"flex flex-col"},je={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},$e={class:"flex flex-row md:flex-col justify-between items-start gap-2"},Ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Se={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Be={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},He={class:"text-lg font-medium mt-2"},ze={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Re={class:"flex flex-col md:items-end gap-8"},Ee={class:"flex flex-row-reverse md:flex-row gap-2"},Fe={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Ge={class:"font-semibold text-xl"},Ie={class:"flex flex-col"},Ue={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},qe={class:"flex flex-row md:flex-col justify-between items-start gap-2"},Ve={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Le={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Qe={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Te={class:"text-lg font-medium mt-2"},We={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},pt={__name:"IndexPdv",setup(Je){const P=O(),Y=T();l(null);const C=l(!0),x=l(!1);let j=l(null);const $=l("");l(null);const R=l(1);l(15);const E=l(0),N=l(!1),_=l(!1);let S;const g=l([]),h=l([]),b=l([]),y=l([]);l(null),l(null),l(null);function F(){P&&P.back()}const B=()=>{_.value=!1},M=r=>{_.value=!0,j.value=r},A=async(r=1)=>{axios.get(`/api/pdvkitchen?page=${r}`,{params:{query:$.value}}).then(a=>{g.value=a.data.order_itens_pending,h.value=a.data.order_itens_getting_ready,b.value=a.data.order_itens_ready,y.value=a.data.order_itens_delivered,E.value=a.data.total,C.value=!1}).catch(a=>{C.value=!1,Y.add({severity:"error",summary:`${a}`,detail:"Message Detail",life:3e3}),F()})},G=()=>{x.value=!0,axios.get(`/api/changestatus/${j.value}`).then(r=>{g.value=r.data.order_itens_pending,h.value=r.data.order_itens_getting_ready,b.value=r.data.order_itens_ready,y.value=r.data.order_itens_delivered,x.value=!1,B(),Y.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(r=>{Y.add({severity:"error",summary:"Erro",detail:`${r}`,life:3e3}),x.value=!1}).finally(()=>{x.value=!1})},I=X(()=>{A(R.value)},300);return W($,I),J(()=>{A(),S=setInterval(()=>{A()},3e4)}),K(()=>{clearInterval(S)}),(r,a)=>{const U=Q,m=L,w=V,H=q;return c(),i(v,null,[C.value?(c(),i("div",Z,[e("div",ee,[e("div",te,[o(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),a[3]||(a[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(c(),i("div",se,[e("div",ae,[e("div",le,[e("div",oe,"Pendentes("+s(g.value.length)+")",1),o(w,{value:g.value,paginator:"",rows:50,layout:"list"},{list:p(n=>[e("div",re,[(c(!0),i(v,null,k(n.items,(t,d)=>(c(),i("div",{key:d},[e("div",{class:D(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":d!==0}])},[e("div",ne,[e("div",de,[e("div",null,[e("span",ie,s(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+s(t.order.id),1),e("p",null,[e("span",ce,"Garçom:"+s(t.user?t.user.name:"N/A"),1)]),e("div",ue,s(t.quantity)+" * "+s(t.product.name),1),e("span",fe,"DC:"+s(u(f)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+s(u(f)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",me,[e("div",pe,[o(m,{onClick:z=>M(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",xe,[e("div",_e,"Preparando("+s(h.value.length)+")",1),o(w,{value:h.value,paginator:"",rows:50,layout:"list"},{list:p(n=>[e("div",ve,[(c(!0),i(v,null,k(n.items,(t,d)=>(c(),i("div",{key:d},[e("div",{class:D(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":d!==0}])},[e("div",ge,[e("div",he,[e("div",null,[e("span",be,s(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+s(t.order.id),1),e("p",null,[e("span",ye,"Garçom:"+s(t.user?t.user.name:"N/A"),1)]),e("p",null,[e("span",we,"Atualizado por:"+s(t.preparedby?t.preparedby.name:"N/A"),1)]),e("div",ke,s(t.product.name),1),e("span",De,"DC:"+s(u(f)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+s(u(f)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",Ye,[e("div",Ce,[o(m,{onClick:z=>M(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Me,[e("div",Ae,"Pronto("+s(b.value.length)+")",1),o(w,{value:b.value,paginator:"",rows:50,layout:"list"},{list:p(n=>[e("div",Pe,[(c(!0),i(v,null,k(n.items,(t,d)=>(c(),i("div",{key:d},[e("div",{class:D(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":d!==0}])},[e("div",je,[e("div",$e,[e("div",null,[e("span",Ne,s(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+s(t.order.id),1),e("p",null,[e("span",Se,"Garçom:"+s(t.user?t.user.name:"N/A"),1)]),e("p",null,[e("span",Be,"Atualizado por:"+s(t.readyby?t.readyby.name:"N/A"),1)]),e("div",He,s(t.product.name),1),e("span",ze,"DC:"+s(u(f)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+s(u(f)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",Re,[e("div",Ee,[o(m,{onClick:z=>M(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Fe,[e("div",Ge,"Entregue("+s(y.value.length)+")",1),o(w,{value:y.value,paginator:"",rows:50,layout:"list"},{list:p(n=>[e("div",Ie,[(c(!0),i(v,null,k(n.items,(t,d)=>(c(),i("div",{key:d},[e("div",{class:D(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":d!==0}])},[e("div",Ue,[e("div",qe,[e("div",null,[e("span",Ve,s(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+s(t.order.id),1),e("p",null,[e("span",Le,"Garçom:"+s(t.user?t.user.name:"N/A"),1)]),e("p",null,[e("span",Qe,"Atualizado por:"+s(t.deliveredby?t.deliveredby.name:"N/A"),1)]),e("div",Te,s(t.product.name),1),e("span",We,"DC:"+s(u(f)(t.created_at).format("DD-MM-YYYY H:mm"))+" | DA:"+s(u(f)(t.updated_at).format("DD-MM-YYYY H:mm")),1)])]),a[4]||(a[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),o(H,{header:"Confirmação",visible:N.value,"onUpdate:visible":a[0]||(a[0]=n=>N.value=n),style:{width:"350px"},modal:!0},{footer:p(()=>[o(m,{label:"Não",icon:"pi pi-times",onClick:B,class:"p-button-text"}),o(m,{label:"Sim",icon:"pi pi-check",onClick:r.deleteData,class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:p(()=>[a[5]||(a[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),o(H,{header:"Deseja avançar o pedido para o próximo estado?",visible:_.value,"onUpdate:visible":a[2]||(a[2]=n=>_.value=n),style:{width:"30vw"}},{default:p(()=>[a[6]||(a[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),o(m,{class:"m-4",label:"Fechar",severity:"danger",onClick:a[1]||(a[1]=n=>_.value=!1)}),o(m,{class:"m-4",label:"Proximo Estado",disabled:x.value==!0,onClick:G},null,8,["disabled"])]),_:1},8,["visible"])],64)}}};export{pt as default};
